!function(){function o(){m($("#bsModalContent"))}function t(){var o='<div class="modal fade message-modal" id="modalHolder" tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog"></div></div>';$("#bsModalContent").length||(o+='<div id="bsModalContent" class="hidden"><div class="modal-body">Loading...</div></div>'),$("#bsModalConfirmContent").length||(o+='<div id="bsModalConfirmContent" class="hidden"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="bsModalTitle"></h4></div><div class="modal-body"></div></div>'),$("#bsModalConfirmButtons").length||(o+='<div id="bsModalConfirmButtons" class="hidden"><div class="clearfix"><button class="btn btn-primary js-confirm-btn">Confirm</button><button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button></div></div>'),$("body").append(o)}function d(o){var t=$(this),d=t.data("url")||t.attr("href");a(null,t.data("size")||""),$(document).trigger("bsmodal.js-modal.clicked",[t]),$.fn.loadModal(d),o.preventDefault()}function a(o,t){c.attr("class","modal-dialog "+t)}function n(o){var t=$(this),d=new FormData(this);$(document).trigger("bsmodal.js-form.submitted",[t,d]),$.ajax({url:this.action,type:this.method,data:"get"==this.method?t.serialize():d,processData:!1,contentType:!1,success:function(o,d,a){$(document).trigger("bsmodal.js-form.success",[o,d,a,t])},complete:function(){$(document).trigger("bsmodal.js-form.completed",[t])}}),o.preventDefault()}function i(o,t,d,a,n){201==a.status?(u.modal("hide"),e(t)):u.hasClass("in")&&u.find(".js-form")?(r(t),$(document).trigger("bsmodal.js-form.loaded",[c])):n.attr("id")?(n.html($("<div>"+t+"</div>").find("#"+n.attr("id")).html()),$(document).trigger("bsmodal.js-form.loaded",[n])):console.debug(".js-form must have an id attribute or be in modal window")}function e(o){o.redirect?window.location=o.redirect:o.event?$(document).trigger(o.event,[o.data]):window.location.reload()}function l(o){var t=$(this),d=t.data("title")||"Delete",n=t.data("text")||"Are you sure you want to remove this item?",i=$("#bsModalConfirmButtons");m($("#bsModalConfirmContent")),c.find("#bsModalTitle").html(d),i.data("append")?(c.find(".modal-body").html(n),c.find(".modal-content").append(i.html())):c.find(".modal-body").html(n+i.html()),a(null,t.data("size")||""),u.modal("show"),c.find(".js-confirm-btn").off().on("click",function(){var o=t.data("url")||t.attr("href");return t.data("no-ajax")||t.hasClass("js-no-ajax")?window.location.href=o:void $.ajax({url:o,type:t.data("method")||"GET",success:e})}),o.preventDefault()}function s(o){$.get(o,function(t){r(t),$(document).trigger("bsmodal.js-modal.loaded",[t,o])})}function m(o){r(o?o.html():"")}function r(o){var t=$('<div class="modal-content"></div>');c.html(t.append(o))}var c,u;$(document).ready(function(){t(),u=$("#modalHolder"),c=u.find(".modal-dialog"),$(document).on("click",".js-modal",d),$(document).on("submit",".js-form",n),$(document).on("click",".js-confirm",l),$(document).on("bsmodal.js-form.success",i),$(document).on("bsmodal.dialog-class",a),u.on("hidden.bs.modal",o)}),$.fn.loadModal=function(t){o(),s(t),u.modal("show")},$.fn.showModal=function(t,d){o(),a(null,d||""),r(t),$(document).trigger("bsmodal.js-modal.loaded",[c]),u.modal("show")}}();