!function(){function t(){var t='<div class="modal fade message-modal" id="modalHolder" tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog"></div></div>';$("#bsModalContent").length||(t+='<div id="bsModalContent" class="hidden"><div class="modal-body">Loading...</div></div>'),$("#bsModalConfirmContent").length||(t+='<div id="bsModalConfirmContent" class="hidden"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="bsModalTitle"></h4></div><div class="modal-body"></div></div>'),$("#bsModalConfirmButtons").length||(t+='<div id="bsModalConfirmButtons" class="hidden"><div class="clearfix"><button class="btn btn-primary js-confirm-btn">Confirm</button><button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button></div></div>'),$("body").append(t)}function o(t){var o=$(this);$(document).trigger("bsmodal.js-modal.clicked",[o]),e($("#bsModalContent")),i(o),r.modal("show"),t.preventDefault()}function d(t){var o=$(this),d=new FormData(this);$(document).trigger("bsmodal.js-form.submitted",[$(this),d]),$.ajax({url:o.attr("action"),type:o.attr("method"),data:d,processData:!1,contentType:!1,success:function(t,d,a){$(document).trigger("bsmodal.js-form.success",[t,d,a,o])},complete:function(){$(document).trigger("bsmodal.js-form.completed",[o])}}),t.preventDefault()}function a(t,o,d,a,n){201==a.status?(r.modal("hide"),o.redirect?window.location=o.redirect:window.location.reload()):r.hasClass("in")&&r.find(".js-form")?s(o):n.attr("id")?n.html($(o).find("#"+n.attr("id"))):console.debug(".js-form must have an id attribute or be in modal window")}function n(t){var o=$(this).data("title")||"Delete",d=$(this).data("text")||"Are you sure you want to remove this item?",a=this,n=$("#bsModalConfirmButtons");e($("#bsModalConfirmContent")),l.find("#bsModalTitle").html(o),n.data("append")?(l.find(".modal-body").html(d),l.find(".modal-content").append(n.html())):l.find(".modal-body").html(d+n.html()),r.modal("show"),l.find(".js-confirm-btn").off().on("click",function(){return $(a).data("no-ajax")||$(a).hasClass("js-no-ajax")?window.location.href=$(a).attr("href"):void $.ajax({url:$(a).attr("href"),type:"GET",success:function(){window.location.reload()}})}),t.preventDefault()}function i(t){var o=t.data("url")||t.attr("href");$.get(o,function(t){s(t),$(document).trigger("bsmodal.js-modal.loaded",[t,o])})}function e(t){s(t?t.html():"")}function s(t){var o=$('<div class="modal-content"></div>');l.html(o.append(t))}var l,r;$(document).ready(function(){t(),r=$("#modalHolder"),l=r.find(".modal-dialog"),$(document).on("click",".js-modal",o),$(document).on("submit",".js-form",d),$(document).on("click",".js-confirm",n),$(document).on("bsmodal.js-form.success",a)})}();